{% extends "base.html" %}

{% block content %}

<h1>Select Model and Image</h1>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <form method="post" novalidate>
                    <h4>
                        Image:
                    </h4>
                    <p>
                        <select name="image_id" id="imageSelect" class="form-control">
                            {% for image in images %}
                                <option value="{{ image }}">{{ image }}</option>
                            {% endfor %}     
                        </select>
                    </p>
                    <!-- Color, Brightness, Contrast, Sharpness sliders -->
                    <div class="form-group">
                        <label for="colorSlider">Color:</label>
                        <input type="range" class="form-control" id="colorSlider" name="color" min="0" max="100" value="0" oninput="this.nextElementSibling.value = this.value">
                        <output>0</output>
                    </div>
                    <div class="form-group">
                        <label for="brightnessSlider">Brightness:</label>
                        <input type="range" class="form-control" id="brightnessSlider" name="brightness" min="0" max="200" value="0" oninput="this.nextElementSibling.value = this.value">
                        <output>0</output>
                      </div>
                    <div class="form-group">
                        <label for="contrastSlider">Contrast:</label>
                        <input type="range" class="form-control" id="contrastSlider" name="contrast" min="0" max="200" value="0" oninput="this.nextElementSibling.value = this.value">
                        <output>0</output>
                    </div>
                    <div class="form-group">
                        <label for="sharpnessSlider">Sharpness:</label>
                        <input type="range" class="form-control" id="sharpnessSlider" name="sharpness" min="0" max="100" value="0" oninput="this.nextElementSibling.value = this.value">
                        <output>0</output>
                    </div>
                    <button type="submit" class="btn btn-dark mb-2">Apply</button>
                </form>
            </div>
        <div class="col-md-6">
            <!-- Image preview container -->
            <div id="imagePreviewContainer" class="text-center">
                <img id="imagePreview" src="" alt="Image Preview" class="img-fluid">
            </div>
        </div>
    </div>
</div>
  
  <script>
    // JavaScript to update image preview on select change
    document.addEventListener('DOMContentLoaded', function () {
        const imageSelect = document.getElementById('imageSelect');
        const imagePreview = document.getElementById('imagePreview');

        // Set the default image preview based on the initially selected option
        updateImagePreview();

        // Listen for changes in the dropdown selection
        imageSelect.addEventListener('change', updateImagePreview);

        function updateImagePreview() {
            const selectedOption = imageSelect.options[imageSelect.selectedIndex];
            const selectedImage = selectedOption.value;
            
            // Update the src attribute of the image preview
            imagePreview.src = 'static/imagenet_subset/'+ selectedImage || 'static/imagenet_subset/'+'default_image_url.jpg';
        }
    });
  </script> 
{% endblock %}
